models:
  - name: air_req_itin
    description: >
      The air_req_itin model represents individual air travel itineraries, 
      combining data from multiple sources to provide a standardized view. 
      Data from different systems may differ due to variations in data entry, 
      formatting, or system-specific requirements. This model is used downstream 
      for reporting, metrics, and auditability, providing insights into travel 
      patterns, flight utilization, and passenger behavior.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - RECORD_ID
            - DATA_SOURCE

    columns:
      - name: AIR_REQ_ITIN_SURROGATE_KEY
        description: >
          A unique identifier for each air travel itinerary, generated by 
          combining RECORD_ID and DATA_SOURCE.

      - name: DATA_SOURCE
        description: >
          The source system from which the data was extracted, either 'SW1' or 'SW2'.

      - name: PSGR_ID
        description: >
          The passenger ID associated with the itinerary.

      - name: RTG_REQ_SEQ
        description: >
          The routing request sequence number for the itinerary.

      - name: FLGT_NR
        description: >
          The flight number for the itinerary.

      - name: DEP_CTY_CD
        description: >
          The departure city code for the itinerary.

      - name: ARR_CTY_CD
        description: >
          The arrival city code for the itinerary.

      - name: DEP_DT
        description: >
          The departure date for the itinerary.

      - name: ARR_DT
        description: >
          The arrival date for the itinerary.

      - name: DEP_TM
        description: >
          The departure time for the itinerary.

      - name: ARR_TM
        description: >
          The arrival time for the itinerary.

      - name: INT_STS
        description: >
          The international status of the itinerary.

      - name: INV_CLOS
        description: >
          The invoice closure status of the itinerary.

      - name: BKG_CRS_CD
        description: >
          The booking class code for the itinerary.

      - name: CNF_CRS_CD
        description: >
          The confirmation class code for the itinerary.

      - name: BKG_RLOC
        description: >
          The booking record locator for the itinerary.

      - name: CNF_RLOC
        description: >
          The confirmation record locator for the itinerary.

      - name: ADV_DT
        description: >
          The advance date for the itinerary.

      - name: MEAL_SRV_CD
        description: >
          The meal service code for the itinerary.

      - name: EQUIP_CD
        description: >
          The equipment code for the itinerary.

      - name: NR_STOPS
        description: >
          The number of stops for the itinerary.

      - name: SCHED_SRV
        description: >
          The scheduled service for the itinerary.

      - name: CHARTER_FLG
        description: >
          The charter flag for the itinerary.

      - name: CARR_CD
        description: >
          The carrier code for the itinerary.

      - name: ITIN_IDX
        description: >
          The itinerary index for the itinerary.

      - name: RECORD_ID
        description: >
          The record ID for the itinerary, used in combination with DATA_SOURCE 
          to uniquely identify each record.
        tests:
          - not_null

      - name: DIRECTION
        description: >
          The direction of the itinerary.

      - name: IS_SHELL_PNR
        description: >
          A flag indicating whether the itinerary is a shell PNR.

      - name: IS_NEGO_BLOCK
        description: >
          A flag indicating whether the itinerary is a negotiation block.

      - name: IS_CHARTER
        description: >
          A flag indicating whether the itinerary is a charter.

      - name: CONF_STATUS
        description: >
          The confirmation status of the itinerary.

      - name: SEAT_NUMBER
        description: >
          The seat number for the itinerary.

      - name: TICKET_NUMBER
        description: >
          The ticket number for the itinerary.

      - name: CLOS_INFO
        description: >
          The closure information for the itinerary.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the record has been deleted in the source system.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the record was last updated.