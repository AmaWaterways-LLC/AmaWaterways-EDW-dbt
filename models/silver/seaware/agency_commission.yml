models:
  - name: agency_commission
    description: >
      The agency_commission model represents standardized commission data from multiple systems, 
      providing a unified view for downstream analytics and reporting. Data from different systems 
      may differ due to variations in data entry, processing, or timing. This model is used to 
      generate reports, track key metrics, and ensure auditability across the enterprise. 
      Key analytical use cases include commission tracking, agency performance analysis, and 
      data quality monitoring.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - RECORD_ID
            - DATA_SOURCE
          

    columns:
      - name: AGENCY_COMMISSION_SURROGATE_KEY
        description: >
          A unique identifier for each agency commission record, generated by combining RECORD_ID 
          and DATA_SOURCE. This key ensures row uniqueness and facilitates data integration.

      - name: DATA_SOURCE
        description: >
          The source system from which the commission data originated, either 'SW1' or 'SW2'. 
          This column is used to track data provenance and manage data integration.

        tests:
          - not_null

      - name: RECORD_ID
        description: >
          A unique identifier for each commission record within its source system. This column, 
          combined with DATA_SOURCE, forms the primary key for the agency_commission model.

        tests:
          - not_null

      - name: AGENCY_ID
        description: >
          The identifier of the agency associated with the commission record. This column is used 
          to link commission data to agency information.

      - name: COMMISS_CODE
        description: >
          The commission code assigned to the agency, representing the type or rate of commission.

      - name: DATE_FROM
        description: >
          The start date of the commission period. This column, along with DATE_TO, defines the 
          duration of the commission.

      - name: DATE_TO
        description: >
          The end date of the commission period.

      - name: USE_FOR_CHILDREN
        description: >
          A flag indicating whether the commission is applicable to child agencies or accounts.

      - name: USE_FROM_ABOVE
        description: >
          A flag indicating whether the commission is inherited from a higher-level agency or 
          account.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp of the last update to the commission record in its source system.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the commission record has been deleted in its source system.