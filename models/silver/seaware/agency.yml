models:
  - name: agency
    description: >
      The agency model represents a standardized view of agency data from multiple source systems, SW1 and SW2. 
      Data from these systems may differ due to varying data collection methods and update frequencies. 
      This model is used downstream for reporting, analytics, and auditing purposes, providing a unified understanding of agency information. 
      Key analytical use cases include analyzing agency performance, tracking changes in agency data over time, and identifying discrepancies between source systems.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - AGENCY_ID
            - DATA_SOURCE

    columns:
      - name: AGENCY_SURROGATE_KEY
        description: >
          A unique identifier for each agency, generated by combining the AGENCY_ID and DATA_SOURCE columns. 
          This key ensures that each agency is uniquely represented across both source systems.

      - name: DATA_SOURCE
        description: >
          The source system from which the agency data originated, either SW1 or SW2. 
          This column is used to track data lineage and identify potential discrepancies between source systems.

      - name: AGENCY_ID
        description: >
          A unique identifier for the agency within its respective source system. 
          This column, combined with DATA_SOURCE, forms the primary key for the agency model.
        tests:
          - not_null

      - name: AGENCY_NAME_TYPED
        description: >
          The typed name of the agency, which may include additional descriptive information. 
          This column is used for reporting and analytics purposes.

      - name: AGENCY_NAME
        description: >
          The name of the agency, which may be used for display purposes in reports and analytics.

      - name: ARC_NUMBER
        description: >
          The ARC (Airlines Reporting Corporation) number assigned to the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: IATA_NUMBER
        description: >
          The IATA (International Air Transport Association) number assigned to the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: CLIA_NUMBER
        description: >
          The CLIA (Cruise Lines International Association) number assigned to the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: IS_ACTIVE
        description: >
          A flag indicating whether the agency is currently active or inactive. 
          This column is used for reporting and analytics purposes.

      - name: IS_DOMESTIC
        description: >
          A flag indicating whether the agency is domestic or international. 
          This column is used for reporting and analytics purposes.

      - name: IS_INTERNAL
        description: >
          A flag indicating whether the agency is internal or external. 
          This column is used for reporting and analytics purposes.

      - name: USE_GUEST_ADDR
        description: >
          A flag indicating whether the agency uses a guest address. 
          This column is used for reporting and analytics purposes.

      - name: COMMENTS
        description: >
          Additional comments or notes related to the agency. 
          This column is used for reporting and analytics purposes.

      - name: MARKETING_MSG
        description: >
          Marketing messages or promotions related to the agency. 
          This column is used for reporting and analytics purposes.

      - name: IS_GSA
        description: >
          A flag indicating whether the agency is a General Sales Agent (GSA). 
          This column is used for industry-specific reporting and compliance purposes.

      - name: CONSORTIUM_TYPE
        description: >
          The type of consortium associated with the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: IS_CONSORTIUM
        description: >
          A flag indicating whether the agency is part of a consortium. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: AGENCY_TYPE
        description: >
          The type of agency, which may be used for reporting and analytics purposes.

      - name: DEFAULT_CURRENCY
        description: >
          The default currency associated with the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: VENDOR_NUMBER
        description: >
          The vendor number assigned to the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: USE_DFLT_CONSORTIUM
        description: >
          A flag indicating whether the agency uses a default consortium. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: BC_TYPE_ID
        description: >
          The business class type ID associated with the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: TAXPAYER_TYPE
        description: >
          The taxpayer type associated with the agency. 
          This column is used for financial reporting and compliance purposes.

      - name: TAXPAYER_NUMBER
        description: >
          The taxpayer number assigned to the agency. 
          This column is used for financial reporting and compliance purposes.

      - name: CONTACT_NAME
        description: >
          The name of the primary contact associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: WEB_ADDRESS
        description: >
          The web address associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: AGENCY_NAME_ESSENTIAL
        description: >
          The essential name of the agency, which may be used for display purposes in reports and analytics.

      - name: FLOATING_DEPOSIT
        description: >
          A flag indicating whether the agency has a floating deposit. 
          This column is used for financial reporting and analytics purposes.

      - name: LANGUAGE_CODE
        description: >
          The language code associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: OFFICE_CODE
        description: >
          The office code associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: AG_ENTITY_TYPE
        description: >
          The agency entity type, which may be used for reporting and analytics purposes.

      - name: IS_FAX_EMAIL_SECURED
        description: >
          A flag indicating whether the agency's fax and email are secured. 
          This column is used for reporting and analytics purposes.

      - name: ABTA_NUMBER
        description: >
          The ABTA (Association of British Travel Agents) number assigned to the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: NOTIF_DFLT_DISTR_TYPE
        description: >
          The notification default distribution type associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: TAXOWNER_NAME
        description: >
          The name of the tax owner associated with the agency. 
          This column is used for financial reporting and compliance purposes.

      - name: INVOICING_NUMBER
        description: >
          The invoicing number assigned to the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: AGENCY_CODE
        description: >
          The agency code associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: FPR_AT_GROSS
        description: >
          A flag indicating whether the agency has FPR (Financial Planning and Reporting) at gross. 
          This column is used for financial reporting and analytics purposes.

      - name: INVOICING_IS_STOPPED
        description: >
          A flag indicating whether invoicing is stopped for the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: INVOICING_DELAY_UNTIL
        description: >
          The date until which invoicing is delayed for the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: INVOICING_ERROR_MSG
        description: >
          The error message associated with invoicing for the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: BALANCE_RECALC_ERROR_MSG
        description: >
          The error message associated with balance recalculation for the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: IS_WHITELABEL
        description: >
          A flag indicating whether the agency is whitelabeled. 
          This column is used for reporting and analytics purposes.

      - name: VALID_CURRENCIES
        description: >
          The valid currencies associated with the agency. 
          This column is used for financial reporting and analytics purposes.

      - name: ALPHA_NUM_ID
        description: >
          The alphanumeric ID associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: ALLOW_REG_COMMISS_TRANSACTIONS
        description: >
          A flag indicating whether the agency allows regular commission transactions. 
          This column is used for financial reporting and analytics purposes.

      - name: ALT_AGENCY_ID
        description: >
          The alternate agency ID associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the agency data was last updated. 
          This column is used for reporting and analytics purposes.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the agency data has been deleted from the source system. 
          This column is used for reporting and analytics purposes.

      - name: COUNTRY_CODE
        description: >
          The country code associated with the agency. 
          This column is used for reporting and analytics purposes.

      - name: GCPS_NUMBER
        description: >
          The GCPS (Global Customer Profile System) number assigned to the agency. 
          This column is used for industry-specific reporting and compliance purposes.

      - name: KEEP_SELF_COMMISSIONS
        description: >
          A flag indicating whether the agency keeps self-commissions. 
          This column is used for financial reporting and analytics purposes.

      - name: EMAIL
        description: >
          The email address associated with the agency. 
          This column is used for reporting and analytics purposes.