models:
- name: agency_link
  description: 'The agency_link model represents the relationships between agencies
    in the enterprise domain.  Data from multiple systems may differ due to variations
    in data entry, processing, or timing.  This standardized model is used downstream
    to provide a unified view of agency relationships,  enabling key analytical use
    cases such as reporting, metrics, and auditability.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - LINK_ID
      - DATA_SOURCE
      where: "SOURCE_DELETED = false"

  columns:
  - name: AGENCY_LINK_SURROGATE_KEY
    description: 'A unique identifier for the agency link, generated by combining
      LINK_ID and DATA_SOURCE.  This column ensures row uniqueness and facilitates
      data integration.

      '
  - name: DATA_SOURCE
    description: 'The source system from which the agency link data originated, either
      SW1 or SW2.  This column is used to track data provenance and manage data integration.

      '
    tests:
    - not_null
  - name: LINK_ID
    description: 'A unique identifier for the agency link within the source system.  This
      column, combined with DATA_SOURCE, ensures row uniqueness.

      '
    tests:
    - not_null
  - name: SUB_AGENCY_ID
    description: 'The identifier of the sub-agency involved in the agency link.  This
      column is used to analyze agency relationships and hierarchies.

      '
  - name: UP_AGENCY_ID
    description: 'The identifier of the up-agency involved in the agency link.  This
      column is used to analyze agency relationships and hierarchies.

      '
  - name: LINK_TYPE
    description: 'The type of agency link, such as partnership or subsidiary.  This
      column is used to categorize and analyze agency relationships.

      '
  - name: DATE_FROM
    description: 'The start date of the agency link.  This column is used to track
      the duration and history of agency relationships.

      '
  - name: DATE_TO
    description: 'The end date of the agency link.  This column is used to track the
      duration and history of agency relationships.

      '
  - name: COMMENTS
    description: 'Additional comments or notes about the agency link.  This column
      is used to capture context and nuances about agency relationships.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: 'The timestamp when the agency link data was last updated.  This
      column is used to track data freshness and manage data integration.

      '
  - name: SOURCE_DELETED
    description: A flag indicating whether the agency link was deleted in the source
      system.  This column is used to manage data integration and track data lineage.
