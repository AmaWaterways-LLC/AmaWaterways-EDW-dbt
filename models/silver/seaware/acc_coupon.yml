models:
  - name: acc_coupon
    description: >
      The acc_coupon model represents a standardized view of coupon data from multiple systems, 
      including SW1 and SW2. This model is used to provide a unified understanding of coupon 
      information, facilitating downstream analytics and reporting. Data from different systems 
      may differ due to variations in data collection and processing methods. Key analytical use 
      cases include tracking coupon usage, analyzing coupon effectiveness, and auditing coupon 
      creation and expiration.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - COUPON_ID
            - DATA_SOURCE
          

    columns:
      - name: ACC_COUPON_SURROGATE_KEY
        description: >
          A unique identifier for each coupon record, generated by combining COUPON_ID and 
          DATA_SOURCE. This key ensures row uniqueness and facilitates data integration.

      - name: DATA_SOURCE
        description: >
          The source system from which the coupon data originated, either SW1 or SW2. This 
          column is used to track data provenance and manage data integration.

        tests:
          - not_null

      - name: COUPON_ID
        description: >
          A unique identifier for the coupon within its source system. This column is used in 
          conjunction with DATA_SOURCE to generate the ACC_COUPON_SURROGATE_KEY.

        tests:
          - not_null

      - name: VALID_FROM
        description: >
          The date from which the coupon is valid. This column is used to track the coupon's 
          effective period.

      - name: VALID_TO
        description: >
          The date until which the coupon is valid. This column is used to track the coupon's 
          effective period.

      - name: AMOUNT
        description: >
          The monetary value of the coupon. This column is used to analyze coupon 
          effectiveness and track coupon usage.

      - name: AMOUNT_LEFT
        description: >
          The remaining monetary value of the coupon. This column is used to track coupon 
          usage and redemption.

      - name: IS_ACTIVE
        description: >
          A flag indicating whether the coupon is currently active. This column is used to 
          track coupon status and manage data integration.

      - name: COMMENTS
        description: >
          Additional information or notes about the coupon. This column is used to provide 
          context and support data analysis.

      - name: COUPON_CLASS
        description: >
          The category or classification of the coupon. This column is used to analyze coupon 
          effectiveness and track coupon usage.

      - name: OFFICE_CODE
        description: >
          A code identifying the office or location associated with the coupon. This column 
          is used to track coupon usage and redemption patterns.

      - name: RES_ID
        description: >
          A unique identifier for the reservation associated with the coupon. This column is 
          used to track coupon usage and redemption.

      - name: GEN_LINK_ID
        description: >
          A unique identifier for the general link associated with the coupon. This column is 
          used to track coupon usage and redemption.

      - name: ENTITY_TYPE
        description: >
          The type of entity associated with the coupon, such as a customer or organization. 
          This column is used to analyze coupon effectiveness and track coupon usage.

      - name: ENTITY_ID
        description: >
          A unique identifier for the entity associated with the coupon. This column is used 
          to track coupon usage and redemption.

      - name: IS_USED
        description: >
          A flag indicating whether the coupon has been used. This column is used to track 
          coupon usage and redemption.

      - name: TEMP_RES_ID
        description: >
          A temporary identifier for the reservation associated with the coupon. This column 
          is used to track coupon usage and redemption.

      - name: PAP_CODE
        description: >
          A code identifying the payment processor associated with the coupon. This column is 
          used to track coupon usage and redemption patterns.

      - name: GRANTED_TO_CLIENT_ID
        description: >
          A unique identifier for the client to whom the coupon was granted. This column is 
          used to track coupon usage and redemption.

      - name: CURRENCY_CODE
        description: >
          A code identifying the currency in which the coupon is denominated. This column is 
          used to analyze coupon effectiveness and track coupon usage.

      - name: FREQUENT_PGM_POINTS
        description: >
          The number of frequent program points associated with the coupon. This column is 
          used to analyze coupon effectiveness and track coupon usage.

      - name: REASON_CODE
        description: >
          A code identifying the reason for the coupon's creation or cancellation. This 
          column is used to track coupon usage and redemption patterns.

      - name: EFFECTIVE_FROM
        description: >
          The date from which the coupon is effective. This column is used to track the 
          coupon's effective period.

      - name: EFFECTIVE_TO
        description: >
          The date until which the coupon is effective. This column is used to track the 
          coupon's effective period.

      - name: RES_ADDON_ID
        description: >
          A unique identifier for the reservation add-on associated with the coupon. This 
          column is used to track coupon usage and redemption.

      - name: DAYS_AFTER_FIRST_USE_EFF
        description: >
          The number of days after the first use of the coupon that it becomes effective. 
          This column is used to track coupon usage and redemption patterns.

      - name: NO_SHOW_DEP_REF_ID
        description: >
          A unique identifier for the no-show deposit reference associated with the coupon. 
          This column is used to track coupon usage and redemption.

      - name: GL_EXPIRATION_ERROR
        description: >
          An error message related to the coupon's expiration in the general ledger. This 
          column is used to track coupon usage and redemption patterns.

      - name: GL_CREATION_DATE
        description: >
          The date on which the coupon was created in the general ledger. This column is 
          used to track coupon usage and redemption.

      - name: GL_CREATION_ERROR
        description: >
          An error message related to the coupon's creation in the general ledger. This 
          column is used to track coupon usage and redemption patterns.

      - name: LINKED_TRANS_ID
        description: >
          A unique identifier for the linked transaction associated with the coupon. This 
          column is used to track coupon usage and redemption.

      - name: USER_DEFINED_COUPON_ID
        description: >
          A user-defined identifier for the coupon. This column is used to track coupon 
          usage and redemption.

      - name: COUPON_CATEGORY
        description: >
          The category or classification of the coupon. This column is used to analyze 
          coupon effectiveness and track coupon usage.

      - name: CHARGE_CODE
        description: >
          A code identifying the charge associated with the coupon. This column is used to 
          track coupon usage and redemption patterns.

      - name: DATE_USED
        description: >
          The date on which the coupon was used. This column is used to track coupon usage 
          and redemption.

      - name: DATE_CREATED
        description: >
          The date on which the coupon was created. This column is used to track coupon 
          usage and redemption.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp at which the coupon record was last updated. This column is used to 
          track data freshness and manage data integration.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the coupon record has been deleted in the source system. 
          This column is used to manage data integration and track data provenance.

      - name: GL_EXPIRATION_DATE
        description: >
          The date on which the coupon expires in the general ledger. This column is used 
          to track coupon usage and redemption.