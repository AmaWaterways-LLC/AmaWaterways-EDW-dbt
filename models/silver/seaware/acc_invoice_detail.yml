models:
  - name: acc_invoice_detail
    description: >
      The acc_invoice_detail model represents a standardized view of invoice details 
      from multiple source systems, including SW1 and SW2. This model is used to 
      provide a unified understanding of invoice data across the enterprise, 
      facilitating reporting, analytics, and auditability. Data from different 
      systems may differ due to variations in data capture, processing, or storage. 
      This model helps to reconcile these differences and provide a single source 
      of truth for invoice data.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - RECORD_ID
            - DATA_SOURCE

    columns:
      - name: ACC_INVOICE_DETAIL_SURROGATE_KEY
        description: >
          A unique identifier for each invoice detail record, generated by 
          combining the RECORD_ID and DATA_SOURCE columns. This key ensures 
          uniqueness across multiple source systems.

      - name: DATA_SOURCE
        description: >
          The source system from which the invoice detail data was obtained, 
          either SW1 or SW2. This column helps to track data lineage and 
          identify potential discrepancies between systems.

      - name: RECORD_ID
        description: >
          A unique identifier for the invoice detail record within its source 
          system. This column, combined with DATA_SOURCE, forms the primary key 
          for this model.
        tests:
          - not_null

      - name: ENTITY_TYPE
        description: >
          The type of entity associated with the invoice detail, such as a 
          customer or vendor. This column provides context for the invoice data.

      - name: ENTITY_ID
        description: >
          A unique identifier for the entity associated with the invoice detail. 
          This column helps to link invoice data to specific entities.

      - name: PARAM_NAME
        description: >
          The name of a parameter or attribute associated with the invoice 
          detail. This column provides additional context for the invoice data.

      - name: PARAM_VALUE
        description: >
          The value of the parameter or attribute associated with the invoice 
          detail. This column provides the actual data for the parameter.

      - name: TIMESTAMP
        description: >
          The timestamp associated with the invoice detail, indicating when the 
          data was recorded or updated.

      - name: FPR_ID
        description: >
          A foreign key referencing the FPR (Financial Planning and Reporting) 
          system. This column is only applicable to data from the SW2 source 
          system.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the invoice detail data was last updated or 
          synchronized from the source system.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the invoice detail record has been deleted 
          in the source system. This column helps to track data changes and 
          ensure data consistency.