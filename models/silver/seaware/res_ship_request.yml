models:
  - name: res_ship_request
    description: >
      This model represents ship requests from multiple sources, including SW1 and SW2. The data from these sources may differ due to variations in data collection and processing methods. This standardized model is used downstream to provide a unified view of ship requests, enabling key analytical use cases such as reporting, metrics, and auditability. The model also facilitates the tracking of changes to ship requests over time.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - SHIP_REQUEST_ID
            - DATA_SOURCE

    columns:
      - name: RES_SHIP_REQUEST_SURROGATE_KEY
        description: >
          A unique identifier for each ship request, generated by combining the SHIP_REQUEST_ID and DATA_SOURCE columns. This key is used to uniquely identify each ship request across different data sources.

      - name: DATA_SOURCE
        description: >
          The source system from which the ship request data was obtained. This column is used to track the origin of the data and to identify any differences in data collection or processing methods between sources.

      - name: SHIP_REQUEST_ID
        description: >
          A unique identifier for the ship request within the source system. This column, in combination with the DATA_SOURCE column, is used to uniquely identify each ship request. This column is part of the primary key.
        tests:
          - not_null

      - name: RES_ID
        description: >
          The identifier of the reservation associated with the ship request.

      - name: GUEST_ID
        description: >
          The identifier of the guest associated with the ship request.

      - name: SHIP_CODE
        description: >
          The code of the ship associated with the ship request.

      - name: REL_DAY_FROM
        description: >
          The start day of the ship request relative to the sail date.

      - name: REL_DAY_TO
        description: >
          The end day of the ship request relative to the sail date.

     - name: SAIL_DATE_FROM
        description: >
          The start date of the sail period associated with the ship request.

      - name: SAIL_DATE_TO
        description: >
          The end date of the sail period associated with the ship request.

      - name: CABIN_CATEGORY
        description: >
          The category of the cabin associated with the ship request.

      - name: CABIN_SEQ_NUMBER
        description: >
          The sequence number of the cabin associated with the ship request.

      - name: INVENTORY_REQUEST_TYPE
        description: >
          The type of inventory request associated with the ship request.

      - name: ALLOCATION_ID
        description: >
          The identifier of the allocation associated with the ship request.

      - name: INVENTORY_RESULT_TYPE
        description: >
          The result type of the inventory associated with the ship request.

      - name: DEP_REF_ID
        description: >
          The departure reference identifier associated with the ship request.

      - name: ARR_REF_ID
        description: >
          The arrival reference identifier associated with the ship request.

      - name: PRICE_CATEGORY
        description: >
          The price category associated with the ship request.

      - name: CHILD_BED_REQUESTED
        description: >
          An indicator of whether a child bed was requested for the ship request.

      - name: MAX_CABIN_OCCUPANCY
        description: >
          The maximum occupancy of the cabin associated with the ship request.

      - name: RESERVE_TYPE
        description: >
          The type of reservation associated with the ship request.

      - name: GENDER
        description: >
          The gender of the guest associated with the ship request.

      - name: BERTHS
        description: >
          The number of berths associated with the ship request.

      - name: IS_NO_SHOW
        description: >
          An indicator of whether the guest was a no-show for the ship request.

      - name: ALLOTMENT_AGREEMENT_ID
        description: >
          The identifier of the allotment agreement associated with the ship request.

      - name: FZ_COUNT
        description: >
          The count of FZ associated with the ship request.

      - name: PAX_RESERVE_TYPE
        description: >
          The type of passenger reservation associated with the ship request.

      - name: REQUESTED_CABIN
        description: >
          The cabin requested by the guest associated with the ship request.

      - name: BERTHS_RESERVED
        description: >
          The number of berths reserved for the ship request.

      - name: BLOCK_ASSIGNMENT
        description: >
          The block assignment associated with the ship request.

      - name: PAX_TYPE
        description: >
          The type of passenger associated with the ship request.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the ship request was last updated.

      - name: SOURCE_DELETED
        description: >
          An indicator of whether the ship request was deleted in the source system.