models:
- name: res_commission_detail
  description: 'This model represents the standardized commission details from multiple
    systems,  providing a unified view of commission data for analytics and reporting.  The
    data from different systems may differ due to variations in data sources,  formatting,
    and processing. This model is used downstream for reporting, metrics,  and auditability,
    enabling the business to make informed decisions.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - RES_COMMISS_DETAIL_ID
      - DATA_SOURCE
      where: "SOURCE_DELETED = false"

  columns:
  - name: RES_COMMISSION_DETAIL_SURROGATE_KEY
    description: 'A unique surrogate key generated from the combination of RES_COMMISS_DETAIL_ID
      and DATA_SOURCE,  ensuring row uniqueness across different data sources.

      '
  - name: DATA_SOURCE
    description: 'The source system of the commission data, either ''SW1'' or ''SW2'',  indicating
      the origin of the data.

      '
  - name: RES_COMMISS_DETAIL_ID
    description: 'A unique identifier for the commission detail record,  used in combination
      with DATA_SOURCE to ensure row uniqueness.

      '
    tests:
    - not_null
  - name: RES_PACKAGE_ID
    description: 'The identifier of the package associated with the commission detail.

      '
  - name: GUEST_ID
    description: 'The identifier of the guest associated with the commission detail.

      '
  - name: RES_ID
    description: 'The identifier of the reservation associated with the commission
      detail.

      '
  - name: COMMISS_SOURCE
    description: 'The source of the commission, indicating how the commission was
      earned.

      '
  - name: COMMISS_CODE
    description: 'The code associated with the commission, providing additional context.

      '
  - name: PERCENT
    description: 'The percentage of the commission, representing the proportion of
      the total amount.

      '
  - name: AMOUNT
    description: 'The total amount of the commission, calculated based on the percentage
      and other factors.

      '
  - name: INVOICE_ITEM_TYPE
    description: 'The type of invoice item associated with the commission detail.

      '
  - name: COMMISS_FARE
    description: 'The fare associated with the commission, representing the base amount.

      '
  - name: IS_MANUAL_ADJUSTMENT
    description: 'A flag indicating whether the commission was manually adjusted.

      '
  - name: RES_PRODUCT_ID
    description: 'The identifier of the product associated with the commission detail.

      '
  - name: CLIENT_ID
    description: 'The identifier of the client associated with the commission detail.

      '
  - name: GUEST_SEQN
    description: 'The sequence number of the guest associated with the commission
      detail.

      '
  - name: AGENCY_ID
    description: 'The identifier of the agency associated with the commission detail.

      '
  - name: PAYOUT_DATE
    description: 'The date of the payout associated with the commission detail.

      '
  - name: GL_PROTOTYPE_ID
    description: 'The identifier of the general ledger prototype associated with the
      commission detail.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: 'The timestamp of the last update to the commission detail record.

      '
  - name: SOURCE_DELETED
    description: 'A flag indicating whether the commission detail record was deleted
      in the source system.

      '
  - name: COMMENTS
    description: Additional comments or notes associated with the commission detail.
