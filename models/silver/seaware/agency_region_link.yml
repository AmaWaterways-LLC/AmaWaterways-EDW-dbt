models:
  - name: agency_region_link
    description: >
      The agency_region_link model represents the relationship between agencies and regions, 
      providing a standardized view of this data from multiple source systems. 
      Data from different systems may differ due to variations in data entry, 
      processing, or timing. This model is used downstream to support reporting, 
      analytics, and auditability, providing insights into agency-region relationships.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - AG_REGION_LINK_ID
            - DATA_SOURCE

    columns:
      - name: AGENCY_REGION_LINK_SURROGATE_KEY
        description: >
          A unique identifier for the agency-region link, generated by combining 
          AG_REGION_LINK_ID and DATA_SOURCE. This column ensures row uniqueness.

        tests:
          - not_null

      - name: DATA_SOURCE
        description: >
          The source system from which the data was extracted, either 'SW1' or 'SW2'. 
          This column helps identify data origin and supports data quality analysis.

      - name: AG_REGION_LINK_ID
        description: >
          A unique identifier for the agency-region link in the source system. 
          This column, combined with DATA_SOURCE, ensures row uniqueness.

        tests:
          - not_null

      - name: AGENCY_ID
        description: >
          The identifier for the agency in the agency-region link. 
          This column supports analysis of agency-specific data.

      - name: DATE_FROM
        description: >
          The start date of the agency-region link. This column helps track 
          changes in agency-region relationships over time.

      - name: DATE_TO
        description: >
          The end date of the agency-region link. This column helps track 
          changes in agency-region relationships over time.

      - name: COMMENTS
        description: >
          Additional comments or notes related to the agency-region link. 
          This column provides context for the relationship.

      - name: REGION_ID
        description: >
          The identifier for the region in the agency-region link. 
          This column supports analysis of region-specific data.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the agency-region link data was last updated. 
          This column helps track data freshness and changes.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the agency-region link was deleted in the source system. 
          This column supports data quality analysis and tracking of deleted records.