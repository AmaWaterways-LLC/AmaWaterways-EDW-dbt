models:
  - name: gtb_request
    description: >
      The gtb_request model represents a standardized view of ticket requests across multiple systems. 
      Data from different systems may differ due to varying data formats, processing times, and business rules. 
      This model is used downstream for reporting, analytics, and auditing purposes, providing a unified understanding of ticket requests. 
      Key analytical use cases include tracking request status, analyzing request types, and monitoring fulfillment rates.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - REQUEST_ID
            - DATA_SOURCE

    columns:
      - name: GTB_REQUEST_SURROGATE_KEY
        description: >
          A unique identifier for each ticket request, generated by combining the REQUEST_ID and DATA_SOURCE columns. 
          This key ensures row uniqueness and facilitates data integration across systems.

      - name: DATA_SOURCE
        description: >
          The source system from which the ticket request data originates. 
          This column helps track data provenance and identify potential discrepancies between systems.

        tests:
          - not_null

      - name: REQUEST_ID
        description: >
          A unique identifier for the ticket request within the source system. 
          This column, combined with DATA_SOURCE, forms the primary key for this model.

        tests:
          - not_null

      - name: AIR_LAST_CHECK_DATE
        description: >
          The date of the last check for air travel availability. 
          This column is used to track the ticket request's progress and analyze fulfillment timelines.

      - name: AIR_GOT_DATE
        description: >
          The date when air travel was confirmed. 
          This column helps track the ticket request's status and measure fulfillment rates.

      - name: BATCH_CODE
        description: >
          A code identifying the batch in which the ticket request was processed. 
          This column is used for auditing and tracking purposes.

      - name: BOOKLET_ID
        description: >
          A unique identifier for the booklet associated with the ticket request. 
          This column helps track the ticket request's documentation and fulfillment.

      - name: ERROR_MSG
        description: >
          An error message associated with the ticket request, if applicable. 
          This column is used to identify and resolve issues during the ticket request process.

      - name: GUEST_ID
        description: >
          A unique identifier for the guest associated with the ticket request. 
          This column helps track the ticket request's ownership and fulfillment.

      - name: PRINT_DATE
        description: >
          The date when the ticket was printed. 
          This column is used to track the ticket request's progress and analyze fulfillment timelines.

      - name: REQUEST_DATE
        description: >
          The date when the ticket request was submitted. 
          This column helps track the ticket request's status and measure fulfillment rates.

      - name: REQUEST_STATUS
        description: >
          The current status of the ticket request. 
          This column is used to track the ticket request's progress and analyze fulfillment rates.

      - name: REQUEST_TYPE
        description: >
          The type of ticket request (e.g., new, change, cancel). 
          This column helps track the ticket request's purpose and analyze fulfillment rates.

      - name: RES_ID
        description: >
          A unique identifier for the reservation associated with the ticket request. 
          This column helps track the ticket request's ownership and fulfillment.

      - name: VACATION_DATE
        description: >
          The date of the vacation associated with the ticket request. 
          This column is used to track the ticket request's purpose and analyze fulfillment rates.

      - name: FORCED_BY_USER
        description: >
          A flag indicating whether the ticket request was forced by a user. 
          This column is used to track manual interventions in the ticket request process.

      - name: TKT_AUTH_ID
        description: >
          A unique identifier for the ticket authorization associated with the ticket request. 
          This column helps track the ticket request's ownership and fulfillment.

      - name: BARCODE
        description: >
          The barcode associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_NAME
        description: >
          The mailing name associated with the ticket request. 
          This column helps track the ticket request's documentation and fulfillment.

      - name: MAILING_ADDRESS_LINE1
        description: >
          The first line of the mailing address associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_ADDRESS_LINE2
        description: >
          The second line of the mailing address associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_CITY
        description: >
          The city of the mailing address associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_STATE
        description: >
          The state of the mailing address associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_ZIP
        description: >
          The zip code of the mailing address associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_COUNTRY
        description: >
          The country of the mailing address associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: MAILING_PHONE
        description: >
          The phone number associated with the mailing address of the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: FEDEX_TRACK_NUM
        description: >
          The FedEx tracking number associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: FEDEX_SHIP_DATE
        description: >
          The date when the ticket was shipped via FedEx. 
          This column is used to track the ticket request's progress and analyze fulfillment timelines.

      - name: FEDEX_SERV_TYPE
        description: >
          The type of FedEx service used for shipping the ticket. 
          This column is used for auditing and tracking purposes.

      - name: LANGUAGE_CODE
        description: >
          The language code associated with the ticket request. 
          This column helps track the ticket request's documentation and fulfillment.

      - name: CARRIER_NAME
        description: >
          The name of the carrier associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: TRACK_NUMBER
        description: >
          The tracking number associated with the ticket request. 
          This column is used for auditing and tracking purposes.

      - name: SHIPPING_DATE
        description: >
          The date when the ticket was shipped. 
          This column is used to track the ticket request's progress and analyze fulfillment timelines.

      - name: ADVANCED_DELIVERY_FEEDBACK
        description: >
          Feedback regarding the advanced delivery of the ticket. 
          This column is used to track the ticket request's progress and analyze fulfillment rates.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the ticket request was deleted in the source system. 
          This column is used for auditing and tracking purposes.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the ticket request was last updated. 
          This column is used to track changes to the ticket request and analyze fulfillment timelines.