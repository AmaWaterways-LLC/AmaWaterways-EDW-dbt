models:
- name: tour_credit
  description: 'The tour_credit model represents a standardized view of tour credit
    data from multiple source systems, SW1 and SW2.  Data from these systems may differ
    due to variations in data collection and processing methods.  This model is used
    downstream for reporting, analytics, and auditability purposes, providing a unified
    understanding of tour credits across the organization.  Key analytical use cases
    include tracking tour credit usage, analyzing credit types, and monitoring policy
    overrides.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - TOUR_CREDIT_ID
      - DATA_SOURCE
      where: "SOURCE_DELETED = false"

  columns:
  - name: TOUR_CREDIT_SURROGATE_KEY
    description: 'A unique identifier for each tour credit record, generated by combining
      TOUR_CREDIT_ID and DATA_SOURCE.  This key ensures row uniqueness and facilitates
      data integration across source systems.

      '
    tests:
    - not_null
  - name: DATA_SOURCE
    description: 'The source system from which the tour credit data originated, either
      SW1 or SW2.  This column is used to track data lineage and identify potential
      discrepancies between source systems.

      '
  - name: TOUR_CREDIT_ID
    description: 'A unique identifier for the tour credit within its source system.  This
      column, combined with DATA_SOURCE, forms the primary key for the model.

      '
    tests:
    - not_null
  - name: AMOUNT
    description: 'The monetary amount associated with the tour credit.  This column
      is used for financial analysis and reporting.

      '
  - name: GROUP_ID
    description: 'The identifier for the group to which the tour credit belongs.  This
      column is used for grouping and aggregating tour credit data.

      '
  - name: AGENCY_ID
    description: 'The identifier for the agency associated with the tour credit.  This
      column is used for agency-level analysis and reporting.

      '
  - name: SAIL_ID
    description: 'The identifier for the sail associated with the tour credit.  This
      column is used for sail-level analysis and reporting.

      '
  - name: CALC_AMOUNT
    description: 'The calculated amount associated with the tour credit.  This column
      is used for financial analysis and reporting.

      '
  - name: COMMENTS
    description: 'Additional comments or notes related to the tour credit.  This column
      is used for providing context and supporting analysis.

      '
  - name: TC_ENTITY_TYPE
    description: 'The type of entity associated with the tour credit.  This column
      is used for categorizing and analyzing tour credit data.

      '
  - name: HEADER_TYPE
    description: 'The type of header associated with the tour credit.  This column
      is used for categorizing and analyzing tour credit data.

      '
  - name: TC_PAX
    description: 'The number of passengers associated with the tour credit.  This
      column is used for analyzing tour credit usage.

      '
  - name: TC_PRICE
    description: 'The price associated with the tour credit.  This column is used
      for financial analysis and reporting.

      '
  - name: TC_POLICY
    description: 'The policy associated with the tour credit.  This column is used
      for analyzing tour credit usage and policy adherence.

      '
  - name: MAX_QTY_TC
    description: 'The maximum quantity of tour credits allowed.  This column is used
      for analyzing tour credit usage and policy adherence.

      '
  - name: IS_VALID
    description: 'A flag indicating whether the tour credit is valid.  This column
      is used for filtering and analyzing valid tour credit data.

      '
  - name: QTY_QUALIFIED
    description: 'The quantity of qualified tour credits.  This column is used for
      analyzing tour credit usage and policy adherence.

      '
  - name: QTY_TC
    description: 'The quantity of tour credits.  This column is used for analyzing
      tour credit usage.

      '
  - name: CALC_AS_FLAT_AMOUNT
    description: 'A flag indicating whether the tour credit is calculated as a flat
      amount.  This column is used for analyzing tour credit usage and financial reporting.

      '
  - name: MIN_QTY_TC
    description: 'The minimum quantity of tour credits allowed.  This column is used
      for analyzing tour credit usage and policy adherence.

      '
  - name: TOUR_CREDIT_TYPE
    description: 'The type of tour credit.  This column is used for categorizing and
      analyzing tour credit data.

      '
  - name: IS_ACTIVE
    description: 'A flag indicating whether the tour credit is active.  This column
      is used for filtering and analyzing active tour credit data.

      '
  - name: CABIN_CATEGORY
    description: 'The category of cabin associated with the tour credit.  This column
      is used for analyzing tour credit usage and policy adherence.

      '
  - name: TC_POLICY_OVR
    description: 'The policy override associated with the tour credit.  This column
      is used for analyzing tour credit usage and policy adherence.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: 'The timestamp when the tour credit data was last updated.  This
      column is used for tracking data freshness and auditing purposes.

      '
  - name: SOURCE_DELETED
    description: 'A flag indicating whether the tour credit data was deleted in the
      source system.  This column is used for tracking data lineage and auditing purposes.

      '
  - name: COLLECTION_ID
    description: 'The identifier for the collection associated with the tour credit.  This
      column is used for grouping and aggregating tour credit data.

      '
  - name: TC_POLICY_OVRD
    description: 'The policy override identifier associated with the tour credit.  This
      column is used for analyzing tour credit usage and policy adherence.

      '
  - name: SHIP_CODE
    description: The code for the ship associated with the tour credit.  This column
      is used for analyzing tour credit usage and policy adherence.
