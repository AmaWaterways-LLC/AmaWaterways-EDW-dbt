models:
  - name: package_itinerary
    description: >
      This model represents a standardized view of package itineraries across multiple source systems, 
      including SW1 and SW2. The data from these systems may differ due to variations in data capture 
      and storage. This model is used downstream for reporting, analytics, and auditability purposes, 
      providing a unified understanding of package itineraries. Key analytical use cases include 
      analyzing package types, component usage, and location trends.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - ITIN_RECORD_ID
            - DATA_SOURCE

    columns:
      - name: PACKAGE_ITINERARY_SURROGATE_KEY
        description: >
          A unique identifier for each package itinerary record, generated by combining ITIN_RECORD_ID 
          and DATA_SOURCE. This key ensures row uniqueness across source systems.

      - name: DATA_SOURCE
        description: >
          The source system from which the package itinerary data originated, either SW1 or SW2. 
          This column is used to track data provenance and facilitate source-specific analysis.

        tests:
          - not_null

      - name: ITIN_RECORD_ID
        description: >
          A unique identifier for the package itinerary record within its source system. This column 
          is used in conjunction with DATA_SOURCE to ensure row uniqueness.

        tests:
          - not_null

      - name: PACKAGE_TYPE
        description: >
          The type of package associated with the itinerary, such as a travel package or event package.

      - name: DAY_NUM_FROM
        description: >
          The starting day number of the package itinerary.

      - name: TIME_FROM
        description: >
          The starting time of the package itinerary.

      - name: DAY_NUM_TO
        description: >
          The ending day number of the package itinerary.

      - name: TIME_TO
        description: >
          The ending time of the package itinerary.

      - name: LOCATION_TYPE_FROM
        description: >
          The type of location from which the package itinerary originates.

      - name: LOCATION_CODE_FROM
        description: >
          The code associated with the location from which the package itinerary originates.

      - name: LOCATION_TYPE_TO
        description: >
          The type of location at which the package itinerary ends.

      - name: LOCATION_CODE_TO
        description: >
          The code associated with the location at which the package itinerary ends.

      - name: COMPONENT_TYPE
        description: >
          The type of component associated with the package itinerary.

      - name: COMPONENT_CODE
        description: >
          The code associated with the component.

      - name: COMPONENT_SUBCODE1
        description: >
          The first subcode associated with the component.

      - name: COMPONENT_SUBCODE2
        description: >
          The second subcode associated with the component.

      - name: COMPONENT_SUBCODE3
        description: >
          The third subcode associated with the component.

      - name: CAN_BE_EXCLUDED
        description: >
          A flag indicating whether the package itinerary can be excluded from certain processes.

      - name: IS_OPTIONAL
        description: >
          A flag indicating whether the package itinerary is optional.

      - name: PACKAGE_LINKS_INCLUSIVE
        description: >
          A flag indicating whether the package itinerary includes links to other packages.

      - name: COMMENTS
        description: >
          Free-form comments associated with the package itinerary.

      - name: DESCRIPTION
        description: >
          A brief description of the package itinerary.

      - name: SEQ_NUM
        description: >
          A sequence number associated with the package itinerary.

      - name: CITY_FROM
        description: >
          The city from which the package itinerary originates.

      - name: CITY_TO
        description: >
          The city at which the package itinerary ends.

      - name: OPTION_GROUP
        description: >
          The option group associated with the package itinerary.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp at which the package itinerary was last updated.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the package itinerary has been deleted in the source system.