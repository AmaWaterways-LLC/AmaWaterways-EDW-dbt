models:
  - name: agency_classification_link
    description: >
      The agency_classification_link model represents the standardized link between agencies and their classificiations, 
      sourced from multiple systems (SW1 and SW2). Data from these systems may differ due to varying update frequencies 
      or data entry practices. This model is used downstream to provide a unified view of agency classifications, 
      facilitating reporting, metrics, and auditability. Key analytical use cases include analyzing classification trends, 
      identifying discrepancies between systems, and ensuring data consistency.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - RECORD_ID
            - DATA_SOURCE

    columns:
      - name: AGENCY_CLASSIFICATION_LINK_SURROGATE_KEY
        description: >
          A unique identifier for the agency classification link, generated by combining RECORD_ID and DATA_SOURCE. 
          This column ensures row uniqueness and facilitates data integration.

      - name: DATA_SOURCE
        description: >
          The source system of the agency classification link, either SW1 or SW2. This column is used to track data origin 
          and manage potential discrepancies between systems.

        tests:
          - not_null

      - name: RECORD_ID
        description: >
          A unique identifier for the agency classification link within its source system. This column, combined with 
          DATA_SOURCE, ensures row uniqueness.

        tests:
          - not_null

      - name: DATE_FROM
        description: >
          The start date of the agency classification link. This column is used to track the duration of the link.

      - name: DATE_TO
        description: >
          The end date of the agency classification link. This column is used to track the duration of the link.

      - name: COMMENTS
        description: >
          Additional comments or notes related to the agency classification link.

      - name: AGENCY_CLASSIFICATION_CODE
        description: >
          The code associated with the agency classification.

      - name: AGENCY_ID
        description: >
          The identifier of the agency related to the classification link.

      - name: AGENCY_CLASS_TYPE
        description: >
          The type of agency classification, only applicable to SW2 data.

      - name: VACATION_DATE_FROM
        description: >
          The start date of a vacation period, only applicable to SW2 data.

      - name: VACATION_DATE_TO
        description: >
          The end date of a vacation period, only applicable to SW2 data.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp of the last update to the agency classification link.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the agency classification link has been deleted in the source system.