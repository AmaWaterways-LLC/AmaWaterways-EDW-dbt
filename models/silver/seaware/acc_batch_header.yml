models:
  - name: acc_batch_header
    description: >
      The acc_batch_header model represents a unified view of batch headers from multiple source systems, SW1 and SW2. 
      Data from these systems may differ due to variations in data capture, processing, and storage. 
      This standardized model is used downstream for reporting, analytics, and auditability, providing a single source of truth for batch header information. 
      Key analytical use cases include tracking batch amounts, monitoring batch status, and analyzing batch processing times.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - BATCH_HDR_ID
            - DATA_SOURCE

    columns:
      - name: ACC_BATCH_HEADER_SURROGATE_KEY
        description: >
          A unique identifier for each batch header record, generated by combining BATCH_HDR_ID and DATA_SOURCE. 
          This surrogate key ensures row uniqueness and facilitates data integration.

      - name: DATA_SOURCE
        description: >
          The source system from which the batch header data originated, either SW1 or SW2. 
          This column is used to track data lineage and identify potential discrepancies between source systems.

      - name: BATCH_HDR_ID
        description: >
          A unique identifier for the batch header within the source system. 
          This column, combined with DATA_SOURCE, forms the primary key for the acc_batch_header model.

        tests:
          - not_null

      - name: BATCH_OPEN_TIME_STAMP
        description: >
          The timestamp when the batch was opened, indicating the start of batch processing. 
          This column is used to track batch processing times and monitor batch status.

      - name: BATCH_CLOSED_TIME_STAMP
        description: >
          The timestamp when the batch was closed, indicating the completion of batch processing. 
          This column is used to track batch processing times and monitor batch status.

      - name: FORM_OF_TRANS
        description: >
          The form of transaction associated with the batch, such as 'credit' or 'debit'. 
          This column is used to categorize batches by transaction type.

      - name: BATCH_AMOUNT
        description: >
          The total amount of the batch, representing the sum of all transactions within the batch. 
          This column is used to track batch amounts and monitor financial activity.

      - name: USER_ID
        description: >
          The identifier of the user who created or processed the batch. 
          This column is used to track user activity and monitor batch processing.

      - name: COMMENTS
        description: >
          Additional comments or notes associated with the batch. 
          This column is used to store supplementary information about the batch.

      - name: CURRENCY_CODE
        description: >
          The currency code associated with the batch, indicating the currency in which the batch amount is denominated. 
          This column is used to track currency exchange rates and monitor financial activity.

      - name: SOURCE_CODE
        description: >
          The source code associated with the batch, indicating the origin of the batch data. 
          This column is used to track data lineage and identify potential discrepancies between source systems.

      - name: SOURCE_ENTITY_TYPE
        description: >
          The type of entity associated with the batch, such as 'customer' or 'vendor'. 
          This column is used to categorize batches by entity type.

      - name: SOURCE_ENTITY_ID
        description: >
          The identifier of the entity associated with the batch. 
          This column is used to track entity activity and monitor batch processing.

      - name: CC_CLIENT_ID
        description: >
          The identifier of the client associated with the batch, specific to credit card transactions. 
          This column is used to track client activity and monitor batch processing.

      - name: CHECK_NUMBER
        description: >
          The check number associated with the batch, specific to check transactions. 
          This column is used to track check activity and monitor batch processing.

      - name: BATCH_STATUS
        description: >
          The status of the batch, indicating whether the batch is open, closed, or in an error state. 
          This column is used to monitor batch status and track batch processing.

      - name: BANK_ID
        description: >
          The identifier of the bank associated with the batch, specific to banking transactions. 
          This column is used to track bank activity and monitor batch processing.

      - name: POST_DATE
        description: >
          The date when the batch was posted, indicating the completion of batch processing. 
          This column is used to track batch processing times and monitor batch status.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the batch header record was last updated, indicating the most recent change to the batch data. 
          This column is used to track data freshness and monitor batch processing.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the batch header record has been deleted in the source system. 
          This column is used to track data lineage and identify potential discrepancies between source systems.

      - name: IS_BATCH_ACTIVE
        description: >
          A flag indicating whether the batch is active or inactive. 
          This column is used to monitor batch status and track batch processing.