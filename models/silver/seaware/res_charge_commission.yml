models:
- name: res_charge_commission
  description: 'This model represents a standardized view of charge commissions across
    multiple systems,  allowing for consistent analytics and reporting. Data from
    different systems may differ  due to variations in data entry, processing, or
    timing. This model is used downstream  to provide a unified understanding of charge
    commissions, enabling key analytical use  cases such as commission tracking, revenue
    analysis, and auditability.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - RECORD_ID
      - DATA_SOURCE
      where: "SOURCE_DELETED = false"

  columns:
  - name: RES_CHARGE_COMMISSION_SURROGATE_KEY
    description: 'A unique identifier for each charge commission record, generated
      by combining  RECORD_ID and DATA_SOURCE. This key ensures row uniqueness and
      facilitates  efficient data retrieval and analysis.

      '
  - name: DATA_SOURCE
    description: 'The source system from which the charge commission data originates,
      either ''SW1''  or ''SW2''. This column is crucial for tracking data provenance
      and understanding  system-specific nuances.

      '
  - name: RECORD_ID
    description: 'A unique identifier for each charge commission record within its
      source system.  This column, in conjunction with DATA_SOURCE, forms the primary
      key for this model.

      '
    tests:
    - not_null
  - name: ENTITY_TYPE
    description: 'The type of entity associated with the charge commission, such as
      a customer or  vendor. This column provides context for understanding the nature
      of the commission.

      '
  - name: ENTITY_ID
    description: 'A unique identifier for the entity associated with the charge commission.
      This  column enables linking to additional entity information and facilitates
      analysis.

      '
  - name: CHARGE_ID
    description: 'A unique identifier for the charge associated with the commission.
      This column  allows for analysis of charge-specific commission data.

      '
  - name: COMMISS_CODE
    description: 'A code representing the commission type or classification. This
      column provides  insight into the nature of the commission and enables categorization.

      '
  - name: AMOUNT
    description: 'The monetary amount of the commission. This column is critical for
      financial  analysis and reporting.

      '
  - name: COMMISS_FARE
    description: 'The fare or rate associated with the commission. This column provides
      additional  context for understanding commission calculations.

      '
  - name: COMMISS_SOURCE
    description: 'The source or origin of the commission. This column offers insight
      into the  commission''s provenance and enables analysis by source.

      '
  - name: PERCENT
    description: 'The percentage rate associated with the commission. This column
      is essential for  understanding commission calculations and analyzing rate changes.

      '
  - name: IS_MANUAL_ADJUSTMENT
    description: 'A flag indicating whether the commission was manually adjusted.
      This column  provides insight into manual intervention and enables analysis
      of adjustment  patterns.

      '
  - name: AGENCY_ID
    description: 'A unique identifier for the agency associated with the commission,
      if applicable.  This column enables linking to agency information and facilitates
      analysis.

      '
  - name: PAYOUT_DATE
    description: 'The date on which the commission was paid out, if applicable. This
      column  provides insight into commission payment timing and enables analysis
      by date.

      '
  - name: GL_PROTOTYPE_ID
    description: 'A unique identifier for the general ledger prototype associated
      with the  commission, if applicable. This column enables linking to general
      ledger  information and facilitates analysis.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: 'The timestamp when the commission record was last updated. This
      column provides  insight into data freshness and enables analysis of update
      patterns.

      '
  - name: SOURCE_DELETED
    description: A flag indicating whether the commission record was deleted in the
      source system.  This column enables tracking of deleted records and facilitates
      data auditing.
