models:
- name: res_charge_detail
  description: 'This model represents a standardized view of charge details from multiple
    systems, SW1 and SW2.  The data from these systems may differ due to differences
    in data collection, processing, or timing.  This model is used downstream for
    reporting, analytics, and auditability, providing a unified view of charge details.  Key
    analytical use cases include tracking charge amounts, commission paid, and manual
    updates.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - CHARGE_ID
      - DATA_SOURCE
      where: "SOURCE_DELETED = false"

  columns:
  - name: RES_CHARGE_DETAIL_SURROGATE_KEY
    description: 'A unique identifier for each charge detail record, generated by
      combining CHARGE_ID and DATA_SOURCE.

      '
  - name: DATA_SOURCE
    description: 'The source system of the charge detail record, either SW1 or SW2.

      '
  - name: ACTION_ID
    description: 'The ID of the action associated with the charge detail record.

      '
  - name: CHARGE_ID
    description: 'The ID of the charge detail record, used in combination with DATA_SOURCE
      to uniquely identify each record.

      '
    tests:
    - not_null
  - name: CHARGE_COMPONENT_CODE
    description: 'The code for the charge component associated with the charge detail
      record.

      '
  - name: ENTITY_TYPE
    description: 'The type of entity associated with the charge detail record.

      '
  - name: ENTITY_ID
    description: 'The ID of the entity associated with the charge detail record.

      '
  - name: CALCULATED_AMOUNT
    description: 'The calculated amount of the charge detail record.

      '
  - name: AMOUNT
    description: 'The amount of the charge detail record.

      '
  - name: ORIGIN_TRANS_ID
    description: 'The ID of the original transaction associated with the charge detail
      record.

      '
  - name: COMMENTS
    description: 'Comments associated with the charge detail record.

      '
  - name: CH_ENTITY_TYPE
    description: 'The type of entity associated with the charge detail record.

      '
  - name: CHARGE_STATE
    description: 'The state of the charge detail record.

      '
  - name: MANUAL_UPDATE_TIMESTAMP
    description: 'The timestamp of the last manual update to the charge detail record.

      '
  - name: MANUAL_UPDATE_USER
    description: 'The user who made the last manual update to the charge detail record.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: 'The timestamp of the last update to the charge detail record.

      '
  - name: SOURCE_DELETED
    description: 'A flag indicating whether the charge detail record has been deleted
      in the source system.

      '
  - name: AMOUNT_PAID
    description: 'The amount paid for the charge detail record.

      '
  - name: COMMISSION_PAID
    description: The commission paid for the charge detail record.
