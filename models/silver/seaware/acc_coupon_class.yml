models:
  - name: acc_coupon_class
    description: >
      The acc_coupon_class model represents a standardized view of coupon classes across multiple systems, including SW1 and SW2. 
      Data from these systems may differ due to variations in data entry, processing, or timing. 
      This model is used downstream to provide a unified understanding of coupon classes, enabling accurate reporting, metrics, and auditability. 
      Key analytical use cases include analyzing coupon redemption patterns, tracking coupon class performance, and identifying data discrepancies between systems.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - COUPON_CLASS
            - DATA_SOURCE
          

    columns:
      - name: ACC_COUPON_CLASS_SURROGATE_KEY
        description: >
          A unique identifier for each coupon class, generated by combining the COUPON_CLASS and DATA_SOURCE columns. 
          This key enables efficient joining and analysis of coupon class data across systems.

      - name: DATA_SOURCE
        description: >
          The source system from which the coupon class data originated, either SW1 or SW2. 
          This column is used to track data lineage and identify potential discrepancies between systems.

      - name: COUPON_CLASS
        description: >
          The unique identifier for a coupon class within a source system. 
          This column, combined with DATA_SOURCE, forms the primary key for this model.

        tests:
          - not_null

      - name: RECORD_ID
        description: >
          A unique identifier for a specific record within a coupon class. 
          This column is used for auditing and tracking purposes.

      - name: COMMENTS
        description: >
          Free-form text comments associated with a coupon class. 
          This column may contain additional context or information about the coupon class.

      - name: EXTERNAL_CODE
        description: >
          An external code or identifier associated with a coupon class. 
          This column may be used for integration with external systems or tracking purposes.

      - name: IS_GEN_PER_CLIENT
        description: >
          A flag indicating whether a coupon class is generated per client. 
          This column is used to determine the scope of coupon class applicability.

      - name: APPLY_AS_PAYMENT
        description: >
          A flag indicating whether a coupon class can be applied as a payment. 
          This column is used to determine the usage rules for a coupon class.

      - name: IS_APPLY_PER_CLIENT
        description: >
          A flag indicating whether a coupon class is applied per client. 
          This column is used to determine the scope of coupon class applicability.

      - name: DFLT_QTY_VALID_DAYS
        description: >
          The default number of days for which a coupon class is valid. 
          This column is used to determine the expiration rules for a coupon class.

      - name: FREQUENT_PGM_CODE
        description: >
          A code associated with a frequent program or loyalty scheme. 
          This column is used to track loyalty program participation.

      - name: CANCEL_WITH_RES
        description: >
          A flag indicating whether a coupon class can be canceled with a reservation. 
          This column is used to determine the cancellation rules for a coupon class.

      - name: APPLY_AS_DISCOUNT
        description: >
          A flag indicating whether a coupon class can be applied as a discount. 
          This column is used to determine the usage rules for a coupon class.

      - name: VALIDATE_FOR_OWNER
        description: >
          A flag indicating whether a coupon class is validated for the owner. 
          This column is used to determine the validation rules for a coupon class.

      - name: PRE_PRINTED
        description: >
          A flag indicating whether a coupon class is pre-printed. 
          This column is used to determine the printing rules for a coupon class.

      - name: COUPON_CLASS_CODE
        description: >
          A code associated with a coupon class. 
          This column is used to track coupon class information.

      - name: NO_APPL_RULES
        description: >
          A flag indicating whether there are no application rules for a coupon class. 
          This column is used to determine the application rules for a coupon class.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the coupon class data was last updated. 
          This column is used for auditing and tracking purposes.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the coupon class data has been deleted in the source system. 
          This column is used to track data lineage and identify potential discrepancies between systems.

      - name: GENERATE_ADDON
        description: >
          A flag indicating whether an add-on is generated for a coupon class. 
          This column is used to determine the add-on rules for a coupon class.

      - name: IS_VOUCHER
        description: >
          A flag indicating whether a coupon class is a voucher. 
          This column is used to determine the voucher rules for a coupon class.