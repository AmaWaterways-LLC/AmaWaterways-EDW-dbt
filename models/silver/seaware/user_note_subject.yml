models:
  - name: user_note_subject
    description: >
      This model represents a standardized view of user note subjects across multiple systems, 
      providing a unified understanding of subjects and their importance. Data from different 
      systems may differ due to varying data entry practices or system-specific nuances. 
      This model is used downstream for reporting, analytics, and auditing purposes, 
      enabling key use cases such as tracking subject importance and analyzing user note trends.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - SUBJECT
            - DATA_SOURCE

    columns:
      - name: USER_NOTE_SUBJECT_SURROGATE_KEY
        description: >
          A unique identifier for each user note subject, generated by combining the subject 
          and data source. This key ensures row uniqueness and facilitates joins with other models.

      - name: DATA_SOURCE
        description: >
          The source system from which the user note subject data originates, either 'SW1' or 'SW2'. 
          This column is used to track data provenance and handle system-specific differences.

      - name: RECORD_ID
        description: >
          A numeric identifier for the user note subject record, transformed from the original 
          RECORD_ID column in the source systems.

      - name: SUBJECT
        description: >
          The user note subject text, transformed from the original SUBJECT column in the source 
          systems. This column is a key component of the surrogate key and is used for analytics 
          and reporting.

      - name: IS_IMPORTANT
        description: >
          A flag indicating whether the user note subject is important, transformed from the 
          original IS_IMPORTANT column in the source systems. This column is used for filtering 
          and prioritization in downstream analytics.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the user note subject was last updated, transformed from the 
          original _FIVETRAN_SYNCED column in the source systems. This column is used for 
          tracking data freshness and auditing purposes.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the user note subject has been deleted in the source system, 
          based on the _FIVETRAN_DELETED column. This column is used for data quality and 
          auditing purposes.

    tests:
      - not_null:
          column: SUBJECT
      - not_null:
          column: DATA_SOURCE