models:
- name: gtb_doc_history
  description: 'The gtb_doc_history model represents the standardized history of document
    status changes across multiple systems.  Data from different systems may differ
    due to varying update frequencies, data entry practices, or system-specific rules.  This
    model is used downstream to analyze document processing efficiency, track status
    changes, and provide auditability.  Key analytical use cases include reporting
    on document throughput, identifying bottlenecks, and monitoring user activity.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - RECORD_ID
      - DATA_SOURCE
      where: "SOURCE_DELETED = false"

  columns:
  - name: GTB_DOC_HISTORY_SURROGATE_KEY
    description: 'A unique identifier for each document history record, generated
      by combining RECORD_ID and DATA_SOURCE.  This surrogate key ensures row uniqueness
      and facilitates efficient data retrieval.

      '
  - name: DATA_SOURCE
    description: 'The source system from which the document history data originated.  This
      column is used to track data lineage and identify potential discrepancies between
      systems.

      '
    tests:
    - not_null
  - name: RECORD_ID
    description: 'A unique identifier for the document history record within the source
      system.  This column, combined with DATA_SOURCE, forms the primary key for this
      model.

      '
    tests:
    - not_null
  - name: DOC_QUEUE_ID
    description: 'The identifier of the document queue associated with the status
      change.  This column is used to analyze document processing workflows and identify
      potential bottlenecks.

      '
  - name: TIME_STAMP
    description: 'The timestamp when the document status change occurred.  This column
      is used to track the chronology of status changes and analyze processing times.

      '
  - name: USER_ID
    description: 'The identifier of the user who initiated the document status change.  This
      column is used to monitor user activity and track accountability.

      '
  - name: NEW_STATUS
    description: 'The new status assigned to the document.  This column is used to
      analyze status changes and identify trends in document processing.

      '
  - name: OLD_STATUS
    description: 'The previous status of the document.  This column is used to track
      status changes and analyze processing workflows.

      '
  - name: SOURCE_DELETED
    description: 'A flag indicating whether the document history record has been deleted
      in the source system.  This column is used to track data lineage and identify
      potential data inconsistencies.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: The timestamp when the document history record was last updated.  This
      column is used to track data freshness and identify potential data staleness
      issues.
