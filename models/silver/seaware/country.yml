models:
  - name: country
    description: >
      The country model represents a standardized view of country data from multiple source systems, SW1 and SW2. 
      Data from these systems may differ due to variations in data collection, processing, and storage. 
      This model is used downstream for reporting, analytics, and data integration, providing a unified view of country information. 
      Key analytical use cases include analyzing country-specific trends, creating data visualizations, and auditing data quality.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - COUNTRY_CODE
            - DATA_SOURCE

    columns:
      - name: COUNTRY_SURROGATE_KEY
        description: >
          A unique identifier for each country, generated by combining the country code and data source. 
          This key ensures row uniqueness and facilitates data integration and analysis.

      - name: DATA_SOURCE
        description: >
          The source system from which the country data originates, either SW1 or SW2. 
          This column is used to track data provenance and manage data integration.

      - name: COUNTRY_ID
        description: >
          A unique identifier for the country within the source system. 
          This column is used for data integration and analysis.

      - name: COUNTRY_CODE
        description: >
          A standardized code representing the country, used for data integration and analysis. 
          This column, combined with DATA_SOURCE, forms the primary key.

        tests:
          - not_null

      - name: COUNTRY_NAME
        description: >
          The full name of the country, used for reporting and data visualization.

      - name: COUNTRY_CODE2
        description: >
          An alternate code representing the country, used for data integration and analysis.

      - name: COUNTRY_ISO_ID
        description: >
          The ISO identifier for the country, used for data integration and analysis.

      - name: INTL_CODE
        description: >
          The international code representing the country, used for data integration and analysis.

      - name: PHONE_INPUT_MASK
        description: >
          A mask used to format phone numbers for the country, used for data integration and analysis.

      - name: POSTAL_CODE_MASK
        description: >
          A mask used to format postal codes for the country, used for data integration and analysis.

      - name: POSTAL_CODE_PROVIDED
        description: >
          A flag indicating whether postal codes are provided for the country, used for data integration and analysis.

      - name: POSTAL_CODE_COMPLETE
        description: >
          A flag indicating whether postal codes are complete for the country, used for data integration and analysis.

      - name: POSTAL_SYMBOLS_NUM_USED
        description: >
          The number of postal symbols used for the country, used for data integration and analysis.

      - name: AGENCY_ID
        description: >
          The identifier of the agency associated with the country, used for data integration and analysis.

      - name: COUNTRY_CODE3
        description: >
          An alternate code representing the country, used for data integration and analysis.

      - name: POSTAL_CODE_REGEXP_MATCH
        description: >
          A regular expression used to match postal codes for the country, used for data integration and analysis.

      - name: POSTAL_CODE_REGEXP_TRIM
        description: >
          A regular expression used to trim postal codes for the country, used for data integration and analysis.

      - name: POSTAL_CODE_FORMAT_SQL
        description: >
          A SQL expression used to format postal codes for the country, used for data integration and analysis.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the country data was last updated, used for data integration and analysis.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the country data has been deleted in the source system, used for data integration and analysis.