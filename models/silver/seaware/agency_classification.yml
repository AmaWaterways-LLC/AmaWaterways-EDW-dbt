models:
  - name: agency_classification
    description: >
      The agency_classification model represents a standardized view of agency classification data from multiple source systems, SW1 and SW2. 
      Data from these systems may differ due to variations in data entry, formatting, or update frequencies. 
      This model is used downstream to provide a unified understanding of agency classifications, enabling accurate reporting, metrics, and auditability. 
      Key analytical use cases include analyzing classification trends, identifying discrepancies between source systems, and tracking changes over time.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - AGENCY_CLASSIFICATION_CODE
            - DATA_SOURCE
          

    columns:
      - name: AGENCY_CLASSIFICATION_SURROGATE_KEY
        description: >
          A unique identifier for each agency classification, generated by combining the AGENCY_CLASSIFICATION_CODE and DATA_SOURCE columns. 
          This surrogate key ensures row uniqueness and facilitates efficient data retrieval and analysis.

      - name: DATA_SOURCE
        description: >
          The source system from which the agency classification data originates, either SW1 or SW2. 
          This column is used to track data provenance and identify potential discrepancies between source systems.

        tests:
          - not_null

      - name: AGENCY_CLASSIFICATION_CODE
        description: >
          A unique code assigned to each agency classification, used for identification and tracking purposes. 
          This column is a primary key component, ensuring row uniqueness in conjunction with the DATA_SOURCE column.

        tests:
          - not_null

      - name: AGENCY_CLASSIFICATION_NAME
        description: >
          The descriptive name associated with each agency classification code, providing context and meaning to the classification.

      - name: RECORD_ID
        description: >
          A unique identifier for each record in the source system, used for auditing and tracking purposes.

      - name: COMMENTS
        description: >
          Additional notes or comments related to the agency classification, providing supplementary context.

      - name: AGENCY_CLASS_TYPE
        description: >
          The type of agency classification, providing further categorization and meaning to the classification code.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp when the agency classification record was last updated in the source system, used for tracking changes and data freshness.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the agency classification record has been deleted in the source system, used for data auditing and tracking purposes.