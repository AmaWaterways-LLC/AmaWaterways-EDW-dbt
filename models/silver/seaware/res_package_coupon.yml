models:
- name: res_package_coupon
  description: 'This model represents a standardized view of package coupons across
    multiple source systems,  including SW1 and SW2. The data from these systems may
    differ due to variations in data  collection and processing methods. This model
    is used downstream to provide a unified view  of package coupons for reporting,
    analytics, and auditability purposes. Key analytical use  cases include tracking
    coupon usage, analyzing revenue generated from coupons, and identifying  trends
    in coupon redemption.

    '
  meta:
    owner: data_engineering
    criticality: high
    pii: false
  tests:
  - dbt_utils.unique_combination_of_columns:
      combination_of_columns:
      - RES_PACKAGE_COUPON_ID
      - DATA_SOURCE
      

  columns:
  - name: RES_PACKAGE_COUPON_SURROGATE_KEY
    description: 'A unique surrogate key generated by combining RES_PACKAGE_COUPON_ID
      and DATA_SOURCE.  This key ensures row uniqueness across multiple source systems.

      '
  - name: DATA_SOURCE
    description: 'The source system from which the data was extracted, either SW1
      or SW2. This column  is used to track the origin of the data and ensure data
      integrity.

      '
    tests:
    - not_null
  - name: RES_PACKAGE_COUPON_ID
    description: 'A unique identifier for the package coupon in the source system.
      This column is used  in combination with DATA_SOURCE to ensure row uniqueness.

      '
    tests:
    - not_null
  - name: RES_ID
    description: 'The identifier for the reservation associated with the package coupon.

      '
  - name: GUEST_ID
    description: 'The identifier for the guest who redeemed the package coupon.

      '
  - name: RES_PACKAGE_ID
    description: 'The identifier for the package associated with the coupon.

      '
  - name: AMOUNT
    description: 'The monetary value of the package coupon.

      '
  - name: COUPON_ID
    description: 'The identifier for the coupon.

      '
  - name: INVOICE_ITEM_TYPE
    description: 'The type of invoice item associated with the package coupon.

      '
  - name: IS_AGENCY_COUPON
    description: 'A flag indicating whether the coupon is an agency coupon.

      '
  - name: REC_SEQN
    description: 'The record sequence number, only applicable to SW2 source system.

      '
  - name: LAST_UPDATED_TIMESTAMP
    description: 'The timestamp when the record was last updated in the source system.

      '
  - name: SOURCE_DELETED
    description: A flag indicating whether the record was deleted in the source system.
