models:
  - name: res_archive
    description: >
      The res_archive model represents a unified view of reservation archives from multiple source systems, SW1 and SW2. 
      Data from these systems may differ due to variations in data collection, processing, and storage. 
      This standardized model is used downstream for reporting, analytics, and auditing purposes, providing a single source of truth for reservation archives. 
      Key analytical use cases include analyzing reservation trends, tracking revenue, and monitoring guest demographics.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - RECORD_ID
            - DATA_SOURCE

    columns:
      - name: RES_ARCHIVE_SURROGATE_KEY
        description: >
          A unique identifier for each reservation archive record, generated by combining RECORD_ID and DATA_SOURCE.

      - name: DATA_SOURCE
        description: >
          The source system of the reservation archive record, either SW1 or SW2.

      - name: RECORD_ID
        description: >
          A unique identifier for each reservation archive record within its source system. 
          This column, combined with DATA_SOURCE, forms the primary key of this model.
        tests:
          - not_null

      - name: RES_ID
        description: >
          The ID of the reservation.

      - name: GROUP_ID
        description: >
          The ID of the group associated with the reservation.

      - name: RES_INIT_DATE
        description: >
          The date the reservation was initialized.

      - name: RES_GUEST_COUNT
        description: >
          The number of guests associated with the reservation.

      - name: RES_ADULT_COUNT
        description: >
          The number of adults associated with the reservation.

      - name: RES_CHILD_COUNT
        description: >
          The number of children associated with the reservation.

      - name: AGENCY_ID
        description: >
          The ID of the agency associated with the reservation.

      - name: CABIN_CATEGORY
        description: >
          The category of the cabin associated with the reservation.

      - name: CABIN_CATEGORY_BERTH
        description: >
          The berth category of the cabin associated with the reservation.

      - name: CABIN_NUMBER
        description: >
          The number of the cabin associated with the reservation.

      - name: SHIP_CODE
        description: >
          The code of the ship associated with the reservation.

      - name: SAIL_DATE_FROM
        description: >
          The start date of the sail associated with the reservation.

      - name: SAIL_DATE_TO
        description: >
          The end date of the sail associated with the reservation.

      - name: PACKAGE_CODE
        description: >
          The code of the package associated with the reservation.

      - name: VACATION_DATE
        description: >
          The date of the vacation associated with the reservation.

      - name: VACATION_END
        description: >
          The end date of the vacation associated with the reservation.

      - name: AIR_REQUEST_TYPE
        description: >
          The type of air request associated with the reservation.

      - name: CURRENCY_CODE
        description: >
          The code of the currency associated with the reservation.

      - name: RES_AMOUNT_TOTAL
        description: >
          The total amount of the reservation.

      - name: RES_DISCOUNT_TOTAL
        description: >
          The total discount amount of the reservation.

      - name: COMMISSION_TOTAL
        description: >
          The total commission amount of the reservation.

      - name: AMOUNT_SPENT_ONBOARD
        description: >
          The amount spent onboard associated with the reservation.

      - name: RES_STATUS
        description: >
          The status of the reservation.

      - name: INSURANCE
        description: >
          The insurance details associated with the reservation.

      - name: OFFICE_CODE
        description: >
          The code of the office associated with the reservation.

      - name: SOURCE_CODE
        description: >
          The code of the source associated with the reservation.

      - name: MANUAL_INPUT
        description: >
          A flag indicating whether the reservation was manually input.

      - name: TRAVEL_AGENT_PHONE_NBR
        description: >
          The phone number of the travel agent associated with the reservation.

      - name: AGENCY_TYPE
        description: >
          The type of agency associated with the reservation.

      - name: ALT_RES_ID
        description: >
          The alternate ID of the reservation.

      - name: ROUTE_ATTRIBUTE
        description: >
          The attribute of the route associated with the reservation.

      - name: PROMO_CODE
        description: >
          The code of the promotion associated with the reservation.

      - name: SHIP_OWNER_CODE
        description: >
          The code of the ship owner associated with the reservation.

      - name: PORT_FROM
        description: >
          The port of departure associated with the reservation.

      - name: PORT_TO
        description: >
          The port of arrival associated with the reservation.

      - name: OUTBOUND_OR_RETURN
        description: >
          A flag indicating whether the reservation is outbound or return.

      - name: GUEST_TYPE
        description: >
          The type of guest associated with the reservation.

      - name: CABIN_NUMBER_BOOKED
        description: >
          The number of the cabin booked associated with the reservation.

      - name: AGENT_ID
        description: >
          The ID of the agent associated with the reservation.

      - name: CRUISE_REVENUE_SCORE
        description: >
          The revenue score of the cruise associated with the reservation.

      - name: CASINO_REVENUE
        description: >
          The revenue of the casino associated with the reservation.

      - name: SAIL_DAYS
        description: >
          The number of sail days associated with the reservation.

      - name: LAND_DAYS
        description: >
          The number of land days associated with the reservation.

      - name: LEGACY_POINTS
        description: >
          The number of legacy points associated with the reservation.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp of the last update to the reservation archive record.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the reservation archive record has been deleted in the source system.