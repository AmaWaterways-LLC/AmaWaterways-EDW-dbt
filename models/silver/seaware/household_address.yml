models:
  - name: household_address
    description: >
      This model represents a standardized household address entity, combining data from multiple source systems (SW1 and SW2). 
      The data from these systems may differ due to variations in data collection, processing, and storage. 
      This model is used downstream to provide a unified view of household addresses, enabling accurate reporting, metrics, and auditability. 
      Key analytical use cases include analyzing household address changes over time, identifying data discrepancies between source systems, and generating reports on household demographics.

    meta:
      owner: data_engineering
      criticality: high
      pii: false

    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - HOUSEHOLD_ADDR_ID
            - DATA_SOURCE

    columns:
      - name: HOUSEHOLD_ADDRESS_SURROGATE_KEY
        description: >
          A unique surrogate key generated by combining HOUSEHOLD_ADDR_ID and DATA_SOURCE, ensuring row uniqueness across source systems.

      - name: DATA_SOURCE
        description: >
          The source system identifier, indicating whether the data originated from SW1 or SW2.

      - name: HOUSEHOLD_ID
        description: >
          A unique identifier for the household, used to link addresses to specific households.

      - name: SEQ_NUMBER
        description: >
          A sequence number for the address, potentially indicating the order of address changes.

      - name: ADDRESS_TYPE
        description: >
          The type of address (e.g., mailing, shipping, or primary).

      - name: ADDRESS_LINE1
        description: >
          The first line of the address.

      - name: ADDRESS_LINE2
        description: >
          The second line of the address.

      - name: ADDRESS_CITY
        description: >
          The city of the address.

      - name: STATE_CODE
        description: >
          The state or province code of the address.

      - name: ZIP
        description: >
          The postal code of the address.

      - name: COUNTRY_CODE
        description: >
          The country code of the address.

      - name: IS_ADDRESS_MAILING
        description: >
          A flag indicating whether the address is used for mailing purposes.

      - name: IS_ADDRESS_SHIPPING
        description: >
          A flag indicating whether the address is used for shipping purposes.

      - name: DATE_FROM
        description: >
          The start date of the address's validity period.

      - name: DATE_TO
        description: >
          The end date of the address's validity period.

      - name: ARE_DATES_EVERY_YEAR
        description: >
          A flag indicating whether the address is valid for every year.

      - name: COMMENTS
        description: >
          Additional comments or notes related to the address.

      - name: HOUSEHOLD_ADDR_ID
        description: >
          A unique identifier for the household address, used in combination with DATA_SOURCE to ensure row uniqueness.
        tests:
          - not_null

      - name: ADDRESS_LINE3
        description: >
          The third line of the address.

      - name: ADDRESS_LINE4
        description: >
          The fourth line of the address.

      - name: ADDRESS_ESSENTIAL
        description: >
          A flag indicating whether the address is essential or critical.

      - name: CAN_CONTACT
        description: >
          A flag indicating whether the household can be contacted at this address.

      - name: LAST_UPDATED_TIMESTAMP
        description: >
          The timestamp of the last update to the address record.

      - name: SOURCE_DELETED
        description: >
          A flag indicating whether the address record has been deleted in the source system.